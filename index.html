<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>카누 배타기 체험</title>
  <style>
    @font-face {
      font-family: 'SokchoBadaBatang';
      src: url('/fonts/SokchoBadaBatang.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }
    body { 
      font-family: 'SokchoBadaBatang', 'Noto Sans KR', Arial, sans-serif; 
      margin: 0; 
      padding: 0; 
      text-align: center; 
      background: #e3f2fd; 
      font-size: 16px; 
      line-height: 1.5; 
      color: #333333; 
    }
    .hero { padding: 20px; }
    .hero img { 
      width: 100%; 
      height: auto; 
      max-height: 300px; 
      object-fit: cover; 
      border-radius: 10px; 
      border: 2px solid #5baed8; 
    }
    .apply-section { padding: 20px; background: #ffffff; }
    .apply-section h2 { font-size: 1.6em; margin: 0 0 10px; font-weight: 700; }
    .apply-section p { font-size: 1em; color: #555555; }
    .apply-button, .cta-button { 
      background: #5baed8; 
      color: white; 
      padding: 12px 20px; 
      font-size: 1em; 
      border: none; 
      cursor: pointer; 
      border-radius: 5px; 
      margin: 10px; 
      display: inline-block; 
      min-width: 200px; 
      pointer-events: auto; 
      user-select: none; 
      touch-action: manipulation; 
      box-shadow: 0 2px 5px rgba(0,0,0,0.2); 
      transition: background 0.3s; 
    }
    .apply-button:hover, .cta-button:hover { background: #1e88e5; }
    .section { padding: 20px; max-width: 600px; margin: auto; }
    .reviews { background: #f5faff; }
    .review { margin: 10px; font-style: italic; font-size: 0.9em; color: #333333; }
    .collage { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; max-width: 600px; margin: 0 auto; }
    .collage-img { 
      width: 45%; 
      max-height: 150px; 
      object-fit: cover; 
      border-radius: 5px; 
      box-shadow: 0 2px 5px rgba(0,0,0,0.2); 
      transition: transform 0.3s; 
    }
    .collage-img:nth-child(1) { transform: rotate(-5deg); }
    .collage-img:nth-child(2) { transform: rotate(5deg); }
    .collage-img:nth-child(3) { transform: rotate(3deg); }
    .collage-img:nth-child(4) { transform: rotate(-3deg); }
    .collage-img:hover { transform: scale(1.1) rotate(0deg); }
    .overview table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 0.9em; }
    .overview td { border: 1px solid #dddddd; padding: 8px; }
    .youtube-link { margin: 20px 0; }
    .youtube-link a { color: #66bb6a; text-decoration: none; font-size: 1em; }
    .youtube-link a:hover { color: #1e88e5; }
    .floating-cta { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
    .modal, .privacy-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; }
    .modal-content, .privacy-modal-content { background: #ffffff; width: 90%; max-width: 350px; margin: 20% auto; padding: 20px; border-radius: 10px; position: relative; }
    .close { position: absolute; right: 15px; top: 10px; font-size: 20px; cursor: pointer; color: #333333; }
    .modal input, .modal select, .modal button, .modal label { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #dddddd; border-radius: 5px; font-size: 0.9em; box-sizing: border-box; }
    .modal input[type="checkbox"] { width: auto; margin-right: 10px; }
    .modal label { display: flex; align-items: center; padding: 0; border: none; }
    .privacy-link { color: #66bb6a; text-decoration: underline; cursor: pointer; margin-left: 5px; }
    .privacy-link:hover { color: #1e88e5; }
    .privacy-modal-content p { font-size: 0.9em; text-align: left; line-height: 1.4; }
    .age-notice { color: #d32f2f; font-size: 0.85em; margin: 8px 0; display: none; text-align: left; }
    img { max-width: 100%; height: auto; }
    @media (max-width: 768px) {
      .hero img { max-height: 250px; }
      .apply-button, .cta-button { width: 100%; }
      .modal-content, .privacy-modal-content { margin: 30% auto; }
      .collage-img { width: 45%; max-height: 120px; }
      body { font-size: 0.9em; }
      .review { font-size: 0.85em; }
    }
    @media (max-width: 375px) {
      .collage-img { width: 48%; max-height: 100px; }
      .age-notice { font-size: 0.8em; }
      .overview table { font-size: 0.8em; }
    }
  </style>
</head>
  <body>
  <!-- Hero Image -->
  <div class="hero">
  <img src="https://i.imgur.com/B3EwCsM.jpeg" alt="카누 1"></div>
  </div>
  <!-- Apply Section -->
  <div class="apply-section">
    <img src="https://i.imgur.com/9URE21J.jpeg">    
    <h2>일일 캠프 신청하기</h2>
    <p>(원하는 날짜를 클릭해주세요)</p>
    <div id="apply-buttons">
      <button class="apply-button" data-date-index="0"></button>
      <button class="apply-button" data-date-index="1"></button>
    </div>
  </div>

  <!-- Core Message -->
  <div class="section">
    <img src="https://i.imgur.com/E91Yb3J.png">
  </div>

  <!-- Reviews -->
  <div class="section reviews">
    <h2>참여자 후기</h2>
        <div class="review"><p>"아들이 너무 좋아해서 뿌듯합니다!" - 박○○ </p></div>
        <div class="review"><p>"겁 많은 5,6학년 두 자매가 너무 즐겁게 탔네요. 아이가 또 신청해달라고 하네요♡♡" - 김○○</p></div>
    <div class="review"><p>"진심으로 수업해주시는 모습에 감동했습니다. 안전과 재미를 위해 수고해주셔 감사드려요" - 김○○</p></div>
    <div class="review"><p>"아이들이 다음에 또 가고싶다고 하네요. 좋은 경험, 좋은 인연 감사합니다." - 최○○</p></div>
    <div class="review"><p>"고요한곳에서 잘 놀았어요. 자연에 편하게 몸을 맡기는 경험이었어요." - 한○○</p></div>
    <div class="collage">
      <img src="https://i.imgur.com/SFGRjUO.jpeg" alt="후기 이미지 1" class="collage-img">
      <img src="https://i.imgur.com/LMd8soC.jpeg" alt="후기 이미지 2" class="collage-img">
      <img src="https://i.imgur.com/9PgwdeI.jpeg" alt="후기 이미지 3" class="collage-img">
      <img src="https://i.imgur.com/76S4ndK.jpeg" alt="후기 이미지 4" class="collage-img">
    </div>
  </div>

<div class="section faq">
  <h2>자주 묻는 질문</h2>
  <details>
    <summary>우천 시 프로그램은?</summary>
    <p>시간당 1mm 이하인 경우 자연 속 운무와 새소리가 더 아릅답습니다. 폭우시 취소/환불 가능합니다.</p>
  </details>
  <details>
    <summary>부모 동반 시 부모는 무엇을 하나요?</summary>
    <p>배에 동승하거나 강변에서 관람할 수 있습니다.</p>
  </details>
  <details>
    <summary>곡성 죽곡 카누캠핑장은 어떻게 가나요?</summary>
    <p>네비게이션에 '죽곡 열린 도서관'을 검색하시면 됩니다. 주차 10대 가능합니다</p>
  </details>
  <details>
    <summary>안전 조치는 어떻게 이뤄지나요?</summary>
    <p> 구명조끼 전원 지급되며, 응급 키트 구비되어있습니다, 강사 1명당 5명 관리합니.</p>
  </details>
</div>
<style>
  .faq details { margin: 10px 0; }
  .faq summary { cursor: pointer; font-weight: bold; }
  .faq p { margin: 5px 0 10px 15px; }
</style>
  
  <!-- Program Overview -->
  <div class="section overview">
    <img src="https://i.imgur.com/KYLkT6p.jpeg">
    <img src="https://i.imgur.com/6cBMzrf.jpeg">
    <h2>프로그램 개요</h2>
    <table>
      <tr><td>참가방법</td><td>신청 후 문자 안내</td></tr>
      <tr><td>장소</td><td>곡성 죽곡 카누캠핑장</td></tr>
      <tr><td>취소</td><td>3일 전 가능</td></tr>
      <tr><td>비용</td><td>1인 3만원, 2인 6만원, 3인 9만원</td></tr>
      <tr><td>체험</td><td>안전 교육, 배타기, 소감나누기(2시간)</td></tr>
      <tr><td>참가 조건</td><td>8~9세는 부모 동반 필수</td></tr>
      <tr><td>안전 조치</td><td>구명조끼 제공, 강사 1명당 5명 관리, 응급 키트 비치</td></tr>
    </table>
  </div>

  <!-- YouTube Link -->
  <div class="section youtube-link">
    <h2>체험 미리보기</h2>
    <a href="https://youtu.be/yXmGzKg2sqY?si=rJSwHyEgqzzGN8jY" target="_blank">유튜브 영상 보러가기</a>
  </div>

  <!-- Team -->
  <div class="section">
    <h2>운영진</h2>
    <p>5년 경력 강사, 수상안전요원(LIFEGUARD) 자격증 보유</p>
    <img src="https://i.imgur.com/QHYwKDp.jpeg">
    <img src="https://i.imgur.com/4lfHYJv.png">
    <img src="https://i.imgur.com/mUH3CBw.jpeg">
  </div>

  <!-- Final CTA (하단 버튼) -->
  <div class="section">
    <div id="final-cta-buttons">
      <button class="cta-button" data-date-index="0"></button>
      <button class="cta-button" data-date-index="1"></button>
    </div>
  </div>

  <!-- Floating CTA (고정 버튼) -->
  <div class="floating-cta">
    <div id="floating-cta-buttons">
      <button class="cta-button" data-date-index="0"></button>
      <button class="cta-button" data-date-index="1"></button>
    </div>
  </div>

  <!-- Modal Form -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">×</span>
      <h2>체험 신청</h2>
      <form id="signupForm">
        <input type="text" id="name" placeholder="이름" required>
        <input type="tel" id="phone" placeholder="연락처" required>
        <select id="childAge" required>
          <option value="" disabled selected>자녀 나이</option>
          <option value="8">8세</option>
          <option value="9-10">9~10세</option>
          <option value="11-12">11~12세</option>
          <option value="13+">13세 이상</option>
        </select>
        <p id="ageNotice" class="age-notice">* 8~9세 자녀는 부모 동반이 필수입니다.</p>
        <select id="participants" required>
          <option value="" disabled selected>참여 인원</option>
          <option value="1">1인 (3만원)</option>
          <option value="2">2인 (6만원)</option>
          <option value="3">3인 (9만원)</option>
        </select>
        <input type="hidden" id="date" value="">
        <label>
          <input type="checkbox" id="privacyAgree" required>
          개인정보 수집, 이용에 동의합니다 (필수, <span class="privacy-link" onclick="openPrivacyModal()">상세보기</span>)
        </label>
        <button type="submit" class="cta-button">신청 완료</button>
      </form>
    </div>
  </div>

  <!-- Privacy Policy Modal -->
  <div id="privacyModal" class="privacy-modal">
    <div class="privacy-modal-content">
      <span class="close" onclick="closePrivacyModal()">×</span>
      <h2>개인정보 수집 및 이용</h2>
      <p>산소모험스쿨은(는) 고지사항 전달을 위해 아래와 같이 개인정보를 수집, 이용합니다.</p>
      <p>1) 개인정보 수집 목적: 회원관리, 고객 상담, 고지사항 전달<br>
         2) 개인정보 수집 항목: 이름, 전화번호, 이메일<br>
         3) 보유 및 이용기간: 6개월<br>
         * 개인정보 수집 및 이용에 동의하지 않을 권리가 있으며, 동의를 거부할 경우에는 서비스 제공이 불가합니다.</p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    // 디버깅용 콘솔 로그
    console.log('Script loaded');

    // EmailJS 초기화
    emailjs.init("pdoL1uaTJvcQun7eE");
    console.log('EmailJS initialized');

    // 날짜 목록 (여기만 수정하면 모든 버튼에 반영됨)
    const dates = ['5/10(토) PM 3~5시', '5/11(일) PM 3~5시'];

    // 버튼 동적 렌더링
    function renderButtons() {
      // Apply Section 버튼
      const applyButtons = document.querySelectorAll('#apply-buttons .apply-button');
      applyButtons.forEach((button, index) => {
        if (dates[index]) {
          button.textContent = `${dates[index]} 신청하기`;
          button.onclick = () => openModal(dates[index]);
        }
      });

      // Final CTA 버튼
      const finalCtaButtons = document.querySelectorAll('#final-cta-buttons .cta-button');
      finalCtaButtons.forEach((button, index) => {
        if (dates[index]) {
          button.textContent = `${dates[index]} 신청하기`;
          button.onclick = () => openModal(dates[index]);
        }
      });

      // Floating CTA 버튼
      const floatingCtaButtons = document.querySelectorAll('#floating-cta-buttons .cta-button');
      floatingCtaButtons.forEach((button, index) => {
        if (dates[index]) {
          button.textContent = `${dates[index]} 신청`;
          button.onclick = () => openModal(dates[index]);
        }
      });
    }

    // 페이지 로드 시 버튼 렌더링
    document.addEventListener('DOMContentLoaded', renderButtons);

    // 신청 모달 열기/닫기
    function openModal(date) {
      console.log('openModal called with date:', date);
      const modal = document.getElementById('modal');
      const dateInput = document.getElementById('date');
      if (modal && dateInput) {
        modal.style.display = 'block';
        dateInput.value = date;
        updateAgeNotice(); // 모달 열릴 때 나이 안내 초기화
      } else {
        console.error('Modal or date input not found');
      }
    }

    function closeModal() {
      console.log('closeModal called');
      const modal = document.getElementById('modal');
      if (modal) {
        modal.style.display = 'none';
      } else {
        console.error('Modal not found');
      }
    }

    // 개인정보 모달 열기/닫기
    function openPrivacyModal() {
      console.log('openPrivacyModal called');
      const privacyModal = document.getElementById('privacyModal');
      if (privacyModal) {
        privacyModal.style.display = 'block';
      } else {
        console.error('Privacy modal not found');
      }
    }

    function closePrivacyModal() {
      console.log('closePrivacyModal called');
      const privacyModal = document.getElementById('privacyModal');
      if (privacyModal) {
        privacyModal.style.display = 'none';
      } else {
        console.error('Privacy modal not found');
      }
    }

    // 나이 선택 시 부모 동반 안내 표시
    function updateAgeNotice() {
      const childAge = document.getElementById('childAge').value;
      const ageNotice = document.getElementById('ageNotice');
      if (ageNotice) {
        if (childAge === '8' || childAge === '9-10') {
          ageNotice.style.display = 'block';
        } else {
          ageNotice.style.display = 'none';
        }
      } else {
        console.error('ageNotice not found');
      }
    }

    // 폼 제출
    const form = document.getElementById('signupForm');
    if (form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        console.log('Form submitted');
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const childAge = document.getElementById('childAge').value;
        const participants = document.getElementById('participants').value;
        const date = document.getElementById('date').value;
        const privacyAgree = document.getElementById('privacyAgree').checked;
        console.log('Form data:', { name, phone, childAge, participants, date, privacyAgree });

        if (!privacyAgree) {
          alert('개인정보 수집 및 이용에 동의해야 신청할 수 있습니다.');
          return;
        }

        // EmailJS로 이메일 전송
        // 실제 Service ID와 Template ID로 교체하세요: EmailJS 대시보드 > Email Services / Email Templates
        emailjs.send('service_abc123', 'template_xyz789', {
          name: name,
          phone: phone,
          child_age: childAge,
          participants: participants,
          date: date,
          privacy_agree: privacyAgree
        }).then(() => {
          console.log('Email sent successfully');
          alert('신청이 완료되었습니다! 24시간 내 문자로 안내드립니다.');
          closeModal();
          this.reset();
        }).catch((error) => {
          console.error('Email send failed:', error);
          alert('신청 실패, 다시 시도해주세요.');
        });
      });

      // 나이 선택 변경 시 안내 업데이트
      const childAgeSelect = document.getElementById('childAge');
      if (childAgeSelect) {
        childAgeSelect.addEventListener('change', updateAgeNotice);
      } else {
        console.error('childAge select not found');
      }
    } else {
      console.error('signupForm not found');
    }
  </script>
  <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93960c980badbf8c',t:'MTc0NjE3MzUwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
